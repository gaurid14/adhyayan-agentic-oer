{% load static %}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Chat ‚Ä¢ {{ other.username }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .chat-wrapper { margin-left:260px; padding:30px; }
        .chat-box { max-height:60vh; overflow:auto; }
        .msg {
          max-width:70%;
          padding:10px 14px;
          border-radius:14px;
          margin-bottom:12px;
        }
        .msg-me {
          background:#1EAE98;
          color:#fff;
          margin-left:auto;
        }
        .msg-other {
          background:#f1f3f5;
        }
        .msg-meta {
          font-size:11px;
          opacity:.7;
          margin-top:4px;
        }
    </style>
</head>
<body class="bg-light">

<div class="chat-wrapper">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">Chat with {{ other.username }}</h5>
        <a href="{% url 'dm_inbox' %}" class="text-decoration-none">‚Üê Inbox</a>
    </div>

    <div class="card shadow-sm mb-3">
        <div class="card-body chat-box">
            {% for m in messages %}
            <div class="d-flex {% if m.sender == user %}justify-content-end{% endif %}">
                <div class="msg {% if m.sender == user %}msg-me{% else %}msg-other{% endif %}">
                    {{ m.content|linebreaks }}
                    <div class="msg-meta">
                        {{ m.sender.username }} ‚Ä¢ {{ m.created_at|date:"H:i" }}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="text-center text-muted">Say hello üëã</div>
            {% endfor %}
        </div>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="input-group">
      <textarea name="content" class="form-control" rows="1"
                placeholder="Write a message..."></textarea>
            <button class="btn btn-primary">Send</button>
        </div>
    </form>
</div>

</body>
</html>
