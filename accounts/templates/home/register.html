{% extends "home/base.html" %} {% load static %} {% block title %}Login / Sign
Up{% endblock %} {% block content %}

<style>
    :root {
        --primary: #0f5f56;
        --primary-dark: #0c4b45;
        --border: #e5e7eb;
        --text: #1f2937;
        --muted: #6b7280;
        --bg: #f7f9f8;
    }

    /* ===== PAGE BASE ===== */

    body {
        background: var(--bg);
        font-family: "Inter", system-ui, -apple-system, sans-serif;
        color: var(--text);
    }

    /* ===== CENTER CONTAINER ===== */

    .container {
        min-height: calc(100vh - 120px);
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px 20px;
    }

    /* ===== AUTH CARD ===== */

    .login-box {
        width: 100%;
        max-width: 820px;
        background: #ffffff;
        border-radius: 16px;
        padding: 40px 48px;
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.05);
    }

    /* ===== MAIN TABS ===== */

    .tabs {
        display: flex;
        gap: 32px;
        border-bottom: 1px solid var(--border);
        margin-bottom: 36px;
    }

    .tab-link {
        font-weight: 600;
        color: var(--muted);
        padding-bottom: 12px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
    }

    .tab-link.active {
        color: var(--primary);
        border-color: var(--primary);
    }

    /* ===== LOGIN / SIGNUP VISIBILITY ===== */

    .login-row,
    .signup-row {
        display: none;
    }

    .login-row.active {
        display: grid;
        grid-template-columns: 1fr 1.1fr; /* image slightly bigger */
        gap: 60px;
        align-items: center;
    }

    .signup-row.active {
        display: block;
    }

    /* ===== INPUTS ===== */

    input,
    select,
    textarea {
        width: 100%;
        padding: 12px 14px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
        font-size: 14px;
        background: #fff;
        transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    textarea {
        min-height: 110px;
        resize: vertical;
    }

    input:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(15,95,86,0.12);
    }

    /* ===== BUTTONS ===== */

    .login-btn {
        margin-top: 32px;
        width: 100%;
        padding: 13px;
        border-radius: 10px;
        background: var(--primary);
        color: #fff;
        font-weight: 600;
        border: none;
        font-size: 15px;
        transition: background 0.2s ease;
    }

    .login-btn:hover {
        background: var(--primary-dark);
    }

    /* ===== ROLE TABS ===== */

    .role-tabs {
        display: flex;
        background: #f1f3f2;
        border-radius: 10px;
        padding: 5px;
        margin-bottom: 32px;
    }

    .role-tab {
        flex: 1;
        padding: 9px;
        background: transparent;
        border: none;
        font-weight: 600;
        border-radius: 8px;
        color: var(--muted);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .role-tab.active {
        background: #ffffff;
        color: var(--primary);
        box-shadow: 0 2px 6px rgba(0,0,0,0.06);
    }

    /* ===== SIGNUP GRID ===== */

    .role-form {
        display: none;
        grid-template-columns: repeat(2, minmax(0,1fr));
        column-gap: 28px;
        row-gap: 22px;
    }

    .role-form.active {
        display: grid;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-group label {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 6px;
        color: #374151;
    }

    .form-group.full-width {
        grid-column: 1 / -1;
    }

    /* Email + Password row */

    .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 28px;
        margin-top: 32px;
    }

    /* ===== LOGIN SIDE ILLUSTRATION ===== */

    .illustration {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .illustration img {
        width: 100%;
        max-width: 420px;  /* bigger image */
        height: auto;
        opacity: 0.95;
    }

    .login-form {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    .login-form input {
        margin-bottom: 18px;
    }

    /* ===== FORGOT PASSWORD ===== */

    .forgot {
        font-size: 13px;
        color: var(--primary);
        margin-top: 8px;
        display: inline-block;
        text-decoration: none;
    }

    .forgot:hover {
        text-decoration: underline;
    }

    /* ===== RESPONSIVE ===== */

    @media (max-width: 900px) {

        .login-row.active {
            grid-template-columns: 1fr;
        }

        .illustration {
            display: none;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .login-box {
            padding: 28px 24px;
        }

        .role-form {
            grid-template-columns: 1fr;
        }
    }

</style>

<div class="container">

    <div class="login-box">

        <!-- Tabs -->
        <div class="tabs">
            <a href="#" class="tab-link active" data-target="login">Login</a>
            <a href="#" class="tab-link" data-target="signup">Sign up</a>
        </div>

        <!-- LOGIN -->
        <div class="form-row login-row active">
            <form class="login-form" method="POST" action="{% url 'login' %}">
                {% csrf_token %}

                <input type="email" name="email" placeholder="Email" required>

                <input type="password" name="password" placeholder="Password" required>

                <a href="{% url 'password_reset' %}" class="forgot">
                    Forgot your password?
                </a>

                <button type="submit" class="login-btn">Login</button>
            </form>

            <div class="illustration">
                <img src="{% static 'images/login.png' %}" alt="Login illustration">
            </div>
        </div>

        <!-- SIGNUP (unchanged structure) -->
        <div class="signup-row">
            <form class="signup-form" method="POST" action="{% url 'register' %}">
                {% csrf_token %}
                <input type="hidden" id="role-input" name="role" value="student">

                <div class="role-tabs">
                    <button type="button" class="role-tab" data-role="student">Student</button>
                    <button type="button" class="role-tab" data-role="contributor">Contributor</button>
                </div>

                <div class="role-form-content">
                    <div class="role-form active" id="student-form">
                        <div class="form-group"><label>Full Name</label><input type="text" name="student-name" required>
                        </div>
                        <div class="form-group"><label>College Name</label><input type="text" name="college-name"
                                                                                  required></div>
                        <div class="form-group"><label>Date of Birth</label><input type="date" name="dob" required>
                        </div>
                        <div class="form-group"><label>Gender</label><select name="gender" required>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select></div>
                        <div class="form-group">
                            <label>Course</label>
                            <select name="course" required>
                                <option value="IT">IT</option>
                                <option value="CS">CS</option>
                                <option value="MECH">MECH</option>
                                <option value="EXTC">EXTC</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Year</label>
                            <select name="year" required>
                                <option value="1">FE</option>
                                <option value="2">SE</option>
                                <option value="3">TE</option>
                                <option value="4">BE</option>
                            </select>
                        </div>
                    </div>

                    <div class="role-form" id="contributor-form">

                        <div class="form-group"><label>First Name</label><input type="text" name="contrib-fname"
                                                                                required></div>
                        <div class="form-group"><label>Last Name</label><input type="text" name="contrib-lname"
                                                                               required></div>
                        <div class="form-group"><label>Phone Number</label><input type="tel" name="contrib-phone"
                                                                                  required></div>
                        <div class="form-group"><label>Designation</label><input type="text" name="designation"
                                                                                 required></div>
                        <div class="form-group"><label>Years of Experience</label><input type="number" name="exp"
                                                                                         required></div>

                        <!-- Highest Qualification Dropdown -->
                        <div class="form-group">
                            <label>Highest Qualification</label>
                            <select name="qualification" id="qualification-select" required>
                                <option value="">Select Highest Qualification</option>
                                <option value="Bachelor">Bachelor</option>
                                <option value="Masters">Masters</option>
                                <option value="PhD">PhD</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="domain-input-tagify">Key Skills / Expertise involved</label>
                            <input type="text" id="domain-input-tagify" name="domain" placeholder="Add skills..."
                                   required>
                            <!-- <small>Please press enter while specifying multiple skills.</small> -->
                        </div>
                        <div class="form-group"><label>Date of Birth</label><input type="date" name="contrib-dob"
                                                                                   required></div>
                        <div class="form-group"><label>Current Institution</label><input type="text" name="institution"
                                                                                         required></div>
                        <div class="form-group full-width"><label>Short Bio</label><textarea name="bio"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>Create Password</label>
                        <input type="password" name="password" required>
                    </div>
                </div>

                <button type="submit" class="login-btn">Sign Up</button>
            </form>
        </div>

    </div>

</div>
<script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>
<script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.polyfills.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      // ---- Tab switching code (unchanged) ----
      const mainTabs = document.querySelectorAll(".tab-link");
      const loginRow = document.querySelector(".login-row");
      const signupRow = document.querySelector(".signup-row");
      mainTabs.forEach((tab) => {
        tab.addEventListener("click", (e) => {
          e.preventDefault();
          mainTabs.forEach((t) => t.classList.remove("active"));
          tab.classList.add("active");
          loginRow.classList.toggle("active", tab.dataset.target === "login");
          signupRow.classList.toggle("active", tab.dataset.target === "signup");
        });
      });

      const roleTabsContainer = document.querySelector(".role-tabs");
      const roleForms = document.querySelectorAll(".role-form");
      const roleTabs = document.querySelectorAll(".role-tab");
      const roleInput = document.getElementById("role-input");

      function updateFormRequirements(activeRole) {
        roleForms.forEach((form) => {
          const isVisible = form.id === activeRole + "-form";
          form
            .querySelectorAll("input:not([type=hidden]), select, textarea")
            .forEach((input) => {
              // Check if the element exists and is not Tagify's internal input
              if (input && !input.hasAttribute("contenteditable")) {
                input.required = isVisible;
              }
            });
        });
      }

      if (roleTabsContainer) {
        roleTabsContainer.addEventListener("click", (e) => {
          if (!e.target.matches(".role-tab")) return;
          const targetRole = e.target.dataset.role;
          if (roleInput) roleInput.value = targetRole;
          roleTabs.forEach((tab) => tab.classList.remove("active"));
          e.target.classList.add("active");
          roleForms.forEach((form) =>
            form.classList.toggle("active", form.id === targetRole + "-form"),
          );
          updateFormRequirements(targetRole);
        });
      }

      // Keep student form active by default
      const studentForm = document.getElementById("student-form");
      const studentTab = document.querySelector('.role-tab[data-role="student"]');
      if (studentForm && studentTab) {
        studentForm.classList.add("active");
        studentTab.classList.add("active");
      }
      updateFormRequirements("student");

      // ---- SIMPLE Tagify Initialization ----
      var domainInput = document.getElementById("domain-input-tagify");
      if (domainInput) {
        // Initialize Tagify with no whitelist or restrictions
        var tagify = new Tagify(domainInput, {
          maxTags: 10, // optional limit
          enforceWhitelist: false, // allow free text input
          dropdown: {
            enabled: 0, // no dropdown suggestions
          },
        });

        // Ensure form validation works properly
        tagify.on("change", function (e) {
          domainInput.required = e.detail.value.length === 0;
      });
  }

      // LinkedIn UI button (for now redirect / later OAuth)
      const linkedinBtn = document.getElementById("linkedin-signup-btn");
      if (linkedinBtn) {
          linkedinBtn.addEventListener("click", () => {
              alert("LinkedIn signup will be enabled soon (OAuth). For now please fill manually.");
              // Later you will redirect here:
              // window.location.href = "/auth/linkedin/";
          });
      }

      // Website autofill (placeholder for now)
      const websiteBtn = document.getElementById("website-autofill-btn");
      if (websiteBtn) {
          websiteBtn.addEventListener("click", () => {
              const url = document.getElementById("portfolio-url").value.trim();
              if (!url) {
                  alert("Please enter your website / portfolio URL.");
                  return;
              }
              alert("Website auto-fill will be integrated soon. For now please fill manually.");
          });
      }
    });

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}